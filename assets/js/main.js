//
// recommend do not edit this file
// --------------------------------------------------
//

var $ = jQuery.noConflict();

(function($) {
  'use strict';

//
// function start
// --------------------------------------------------
//

  var BONEFISHCODE = {
    ready: function() {
      BONEFISHCODE.fn_ie10ViewportFix();
      BONEFISHCODE.fn_deviceDetect();
      BONEFISHCODE.fn_scrollspy();
      BONEFISHCODE.fn_smoothScroll();
      BONEFISHCODE.fn_grid();
      BONEFISHCODE.fn_popup();
      BONEFISHCODE.fn_accordion();
      BONEFISHCODE.fn_counter();
      BONEFISHCODE.fn_form();
      BONEFISHCODE.fn_slideshow();
      BONEFISHCODE.fn_cloud();
      BONEFISHCODE.fn_youtube();
      BONEFISHCODE.fn_utility();
    },
    load: function() {
      BONEFISHCODE.fn_pageLoader();
      BONEFISHCODE.fn_navbar();
      BONEFISHCODE.fn_sticky();
      BONEFISHCODE.fn_hero();
      BONEFISHCODE.fn_carousel();
      BONEFISHCODE.fn_animation();
      BONEFISHCODE.fn_bgAudio();
    },
    scroll: function() {
      BONEFISHCODE.fn_sticky();
    },
    resize: function() {
      BONEFISHCODE.fn_navbar();
      BONEFISHCODE.fn_sticky();
    },
    orientationchange: function() {
      BONEFISHCODE.fn_navbar();
      BONEFISHCODE.fn_hero();
    },

//
// ie10 viewport fix
// --------------------------------------------------
//

    fn_ie10ViewportFix: function() {
      if (navigator.userAgent.match(/IEMobile\/10\.0/)) {
        var msViewportStyle = document.createElement('style');
        msViewportStyle.appendChild(
          document.createTextNode(
            '@-ms-viewport{width:auto!important}'
          )
        );
        document.querySelector('head').appendChild(msViewportStyle);
      }
    },

//
// device detect
// --------------------------------------------------

    fn_deviceDetect: function() {
      if ($html.hasClass('desktop')) {
        isMobile = false;
        isDesktop = true;
      } else {
        isMobile = true;
        isDesktop = false;
      }
    },

//
// page loader
// --------------------------------------------------
//

    fn_pageLoader: function() {
      var $el = $('.page-loader');

      if ($el.length) {
        $el.velocity('fadeOut', {
          duration: pageLoaderDuration,
          easing: easeInOutQuart,
          complete: function() {
            $(this).remove();
            $html.addClass('js-page-loaded');
          }
        });
      }
    },

//
// navbar
// --------------------------------------------------
//

    fn_navbar: function() {
      $('.navbar-collapse').css({ maxHeight: $(window).height() - $('.navbar-header').height() + 'px' });
    },

//
// scrollspy
// --------------------------------------------------
//

    fn_scrollspy: function() {
      var target = '.page-navbar';
      var offset = $(target).find('.navbar-header').outerHeight() + 1;

      $body.scrollspy({
        target: target,
        offset: parseInt(offset)
      });
    },

//
// smooth scroll
// --------------------------------------------------
//

    fn_smoothScroll: function() {
      $('[data-smooth-scroll="true"]').on('click', function(e) {
        e.preventDefault();

        var id = $(this).attr('href');

        if ($(id).is(':visible')) {
          var offset = $(id).offset().top - $('.page-navbar').find('.navbar-header').outerHeight();

          $('html, body').stop().animate({
            scrollTop: offset
          }, 1250);
        }
      });
    },

//
// sticky
// --------------------------------------------------
//

    fn_sticky: function() {
      if ($(window).scrollTop() > 0) {
        $html.removeClass('js-no-scroll');
        $html.addClass('js-is-scroll');
      } else {
        $html.removeClass('js-is-scroll');
        $html.addClass('js-no-scroll');
      }
    },

//
// hero
// --------------------------------------------------
//

    fn_hero: function() {
      var $el = $('.js-hero, .page-intro-hero');

      $el.css('height', $(window).height() + 'px');
    },

//
// grid
// --------------------------------------------------
//

    fn_grid: function() {
      var $gridList = $('.grid-list');

      if ($gridList.length) {
        var itemSelector = '.grid-list-item';
        var $grid = $gridList.isotope({
          itemSelector: itemSelector
        });

        $grid.imagesLoaded().progress(function() {
          $grid.isotope('layout');
        });
      }

      var $gridFilterList = $('.grid-filter-list');

      if ($gridList.add($gridFilterList).length) {
        $('[data-grid-filter]').on('click', function(e) {
          e.preventDefault();

          var $this = $(this);
          var filterValue = $this.data('grid-filter');

          $('[data-grid-filter]').parent('li').filter('.active').removeClass('active');
          $this.parent('li').addClass('active');

          $gridList.isotope({
            filter: filterValue
          });
        });
      }
    },

//
// animation
// --------------------------------------------------
//

    fn_animation: function() {
      if (!isMobile && Modernizr.cssanimations && Modernizr.csstransforms && Modernizr.csstransforms3d && Modernizr.csstransitions) {
        setTimeout(function() {
          var wow = new WOW();
          wow.init();
        }, pageLoaderDuration);
      } else {
        $('.wow').removeClass('wow');
      }
    },

//
// carousel
// --------------------------------------------------
//

    fn_carousel: function() {
      var $carousel = $('.bfc-carousel');

      if ($carousel.length) {
        $carousel.slick();
      }

      var $screenshotCarousel = $('#screenshotCarousel');

      if ($screenshotCarousel.length) {
        $screenshotCarousel.slick({
          slidesToShow: 6,
          slidesToScroll: 6,
          infinite: false,
          arrows: false,
          dots: true,
          swipeToSlide: true,
          responsive: [
            {
              breakpoint: 1600,
              settings: {
                slidesToShow: 5,
                slidesToScroll: 5
              }
            },
            {
              breakpoint: 1400,
              settings: {
                slidesToShow: 4,
                slidesToScroll: 4
              }
            },
            {
              breakpoint: 992,
              settings: {
                slidesToShow: 3,
                slidesToScroll: 3
              }
            },
            {
              breakpoint: 768,
              settings: {
                slidesToShow: 2,
                slidesToScroll: 2
              }
            },
            {
              breakpoint: 480,
              settings: {
                slidesToShow: 1,
                slidesToScroll: 1
              }
            }
          ]
        });
      }

      var $testimonialCarousel = $('#testimonialCarousel');

      if ($testimonialCarousel.length) {
        $testimonialCarousel.slick({
          slidesToShow: 2,
          slidesToScroll: 2,
          infinite: false,
          arrows: false,
          dots: true,
          swipeToSlide: true,
          responsive: [
            {
              breakpoint: 992,
              settings: {
                slidesToShow: 1,
                slidesToScroll: 1
              }
            }
          ]
        });
      }
    },

//
// popup
// --------------------------------------------------
//

    fn_popup: function() {
      var $popupIframe = $('.popup-youtube, .popup-vimeo, .popup-gmaps');
      var $popupInline = $('.popup-inline');
      var $popupGallery = $('.popup-gallery');

      $popupIframe.each(function() {
        var $this = $(this);

        $popupIframe.magnificPopup({
          items: {
            src: $popupIframe.data('mfp-src'),
          },
          type: 'iframe',
          midClick: true,
          fixedContentPos: true,
          fixedBgPos: true,
          callbacks: {
            beforeOpen: function() {
              if (!$this.hasClass('popup-gmaps')) {
                $('.js-bg-youtube-is-playing').each(function() {
                  $(this).YTPPause().toggleClass('js-bg-youtube-is-playing --js-bg-youtube-is-paused');
                });

                var $bgAudioPlayer = $('#bgAudioPlayer');

                if ($bgAudioPlayer.length && !$bgAudioPlayer[0].paused) {
                  $bgAudioPlayer[0].pause();
                  $html.toggleClass('js-bg-audio-is-playing --js-bg-audio-is-paused');
                }
              }
            },
            afterClose: function() {
              if (!$this.hasClass('popup-gmaps')) {
                $('.--js-bg-youtube-is-paused').each(function() {
                  $(this).YTPPlay().toggleClass('--js-bg-youtube-is-paused js-bg-youtube-is-playing');
                });          

                var $bgAudioPlayer = $('#bgAudioPlayer');

                if ($bgAudioPlayer.length && $html.hasClass('--js-bg-audio-is-paused')) {
                  $bgAudioPlayer[0].play();
                  $html.toggleClass('--js-bg-audio-is-paused js-bg-audio-is-playing');
                }
              }
            },
          }
        });
      });

      $popupInline.each(function() {
        var $this = $(this);

        $this.magnificPopup({
          type: 'inline',
          midClick: true,
          closeMarkup: '<button title="%title%" type="button" class="mfp-close text-primary">&#215;</button>',
          closeBtnInside: true,
          fixedContentPos: true,
          fixedBgPos: true,
        });
      });

      $popupGallery.each(function() {
        var $this = $(this);

        $this.magnificPopup({
          delegate: '.popup-gallery-link',
          type: 'image',
          gallery: {
            enabled: true,
          },
          midClick: true,
          fixedContentPos: true,
          fixedBgPos: true
        });
      });
    },

//
// accordion
// --------------------------------------------------
//

    fn_accordion: function() {
      var $accordionItem = $('.accordion-item');
      $accordionItem.find('.accordion-content').hide();  
      $accordionItem.filter('.active').find('.accordion-content').show();

      $('.accordion-header').on('click', function(e) {
        var $this = $(this);
        var $target =  $this.parent().find('.accordion-content');

        e.preventDefault();

        if ($this.parent().hasClass('active')) {
          $this.parent().removeClass('active');
          $target.stop(true, true).slideUp();
        } else {
          $this.closest('.accordion').find('.accordion-item').filter('.active').find('.accordion-content').stop(true, true).slideUp();
          $this.closest('.accordion').find('.accordion-item').filter('.active').removeClass('active');
          $target.parent().addClass('active');
          $target.slideDown();
        }
      });
    },

//
// counter
// --------------------------------------------------
//

    fn_counter: function() {
      var $el = $('.counter-box-amount');

      if ($el.length) {
        $el.each(function() {
          var $this = $(this);

          $this.text($this.data('from'));

          $(window).on('load', function() {
            setTimeout(function() {
              $this.appear().one('appear', function() {
                $this.countTo();
              });
              $.force_appear();
            }, pageLoaderDuration);
          });
        });
      }
    },

//
// form
// --------------------------------------------------
//

    fn_form: function() {
      $('.form').each(function() {
        var $form = $(this);
        var $formControl = $form.find('.form-control');
        var $formNotify = $form.find('.form-notify');
        var formUrl = $form.data('action');

        $formControl.each(function() {
          var $this = $(this);

          $this.on('focus', function() {
            $(this).parent('.form-group').addClass('focus');
          }).on('blur', function() {
            $(this).parent('.form-group').removeClass('focus');
          });
        });

        $form.validate({
          onclick: false,
          onfocusout: false,
          onkeyup: false,
          ignore: '.ignore',
          rules: {
            fname: {
              required: true
            },
            lname: {
              required: true
            },
            name: {
              required: true
            },
            email: {
              required: true,
              email: true
            },
            message: {
              required: true
            },
            agree: {
              required: true
            },
          },
          errorPlacement: function(error, element) {},
          highlight: function(element) {
            $(element).closest('.form-group').addClass('error');
          },
          unhighlight: function(element) {
            $(element).closest('.form-group').removeClass('error');
          },
          submitHandler: function(form) {
            $.ajax({
              type: 'POST',
              dataType: 'json',
              url: formUrl,
              cache: false,
              data: $form.serialize(),
              success: function(data) {
                if (data.type != 'success') {
                  $formNotify.html('<span class="form-icon-error"></span> ' + data.msg).show();
                } else {
                  $form.validate().resetForm();
                  $form[0].reset();
                  $form.find('.error').removeClass('error');
                  $form.addClass('successfully');
                  $form.find('button').blur();
                  $formNotify.html('<span class="form-icon-success"></span> ' + data.msg).show();
                }
              },
              error: function(XMLHttpRequest, textStatus, errorThrown) {
                $formNotify.html('<span class="form-icon-error"></span> An error occurred. Please try again later.').show();
              },
            });
          },
          invalidHandler: function(event, validator) {
            var errors = validator.numberOfInvalids();

            if (errors) {
              var message = errors == 1 ?
              '<span class="form-icon-error"></span>You missed 1 field. It has been highlighted.' :
              '<span class="form-icon-error"></span>You missed ' + errors + ' fields. They have been highlighted.';
              $formNotify.html(message).show();
            }
          }
        });
      });
    },

//
// slide
// --------------------------------------------------

    fn_slideshow: function() {
      var $el = $('.bg-slideshow');

      $el.each(function() {
        var $this = $(this);
        var slides = [];
        for (var i = 1; i <= $this.data('slideshow-img-amount'); i++) {
          slides.push({
            src: $this.data('slideshow-img-src').replace('%', i)
          })
        }

        $this.vegas({
          slides: slides,
          delay: 7000
        });
      });
    },

//
// cloud
// --------------------------------------------------
//

    fn_cloud: function() {
      var $el = $('.bg-cloud').find('.cloud');

      if ($el.length) {
        $el.each(function() {
          var $this = $(this);

          (function cloud() {
            $this.velocity({
              translateZ: '0',
              translateX: ['-100%', '100%']
            }, {
              duration: $this.data('duration'),
              easing: 'linear'
            });
            setTimeout(cloud, $this.data('duration'));
          })();
        });
      }
    },

//
// youtube
// --------------------------------------------------

    fn_youtube: function() {
      if ($('.bg-youtube').length) {
        $('.bg-youtube').each(function() {
          var $container = $(this);
          var $player = $container.find('.bg-youtube-player');

          if (isMobile) {
            $container.find('.bg-youtube-placeholder').remove();
          } else {
            $container.find('.bg-youtube-fallback').remove();
            $player.YTPlayer();
            $player.on('YTPPlay', function() {
              $(this).addClass('js-bg-youtube-is-playing').removeClass('js-bg-youtube-is-paused');
            });
            $player.on('YTPPause', function() {
              $(this).addClass('js-bg-youtube-is-paused').removeClass('js-bg-youtube-is-playing');
            });
          }
        });
      }
    },

//
// bg audio
// --------------------------------------------------
//

    fn_bgAudio: function() {
      if ($('#bgAudioPlayer').length) {
        var $player = $('#bgAudioPlayer');

        if (isMobile) {
          $player[0].pause();
          $html.addClass('js-bg-audio-is-paused');
        } else {
          $player[0].play();
          $html.addClass('js-bg-audio-is-playing');
        }

        $('.bg-audio-toggle').find('a').on('click', function(e) {
          e.preventDefault();

          if ($player[0].paused) {
            $player[0].play();
            $html.toggleClass('js-bg-audio-is-paused js-bg-audio-is-playing');
          } else {
            $player[0].pause();
            $html.toggleClass('js-bg-audio-is-playing js-bg-audio-is-paused');
          }
        });
      }
    },

//
// utility
// --------------------------------------------------

    fn_utility: function() {
      $('[data-css-width]').each(function() {
        var $this = $(this);

        $this.css('width', $this.data('css-width'));
      });

      $('[data-css-height]').each(function() {
        var $this = $(this);

        $this.css('height', $this.data('css-height'));
      });

      $('[data-css-max-width]').each(function() {
        var $this = $(this);

        $this.css('max-width', $this.data('css-max-width'));
      });

      $('[data-css-max-height]').each(function() {
        var $this = $(this);

        $this.css('max-height', $this.data('css-max-height'));
      });

      $('[data-css-opacity]').each(function() {
        var $this = $(this);

        $this.css('opacity', $this.data('css-opacity'));
      });

      $('[data-css-background-color]').each(function() {
        var $this = $(this);

        $this.css('background-color', $this.data('css-background-color'));
      });

      $('[data-css-background-image]').each(function() {
        var $this = $(this);

        $this.css('background-image', 'url(' + $this.data('css-background-image') + ')');
      });

      $('[data-css-background-image-mobile]').each(function() {
        if (isMobile) {
          var $this = $(this);

          $this.css('background-image', 'url(' + $this.data('css-background-image-mobile') + ')');
        }
      });

      $('[data-css-background-image-desktop]').each(function() {
        if (isDesktop) {
          var $this = $(this);

          $this.css('background-image', 'url(' + $this.data('css-background-image-desktop') + ')');
        }
      });
    },

//
// end of BONEFISHCODE
// --------------------------------------------------

  };

//
// global variable
// --------------------------------------------------
//

  var $html = $('html'),
      $body = $('body'),
      easeInOutQuart = [0.770, 0.000, 0.175, 1.000],
      isMobile,
      isDesktop,
      pageLoaderDuration = 0;
      if ($('.page-loader').length && typeof BONEFISHCODE.fn_pageLoader !== 'undefined' && $.isFunction(BONEFISHCODE.fn_pageLoader)) {
        pageLoaderDuration = 1500;
      }
//
// init
// --------------------------------------------------

	$(function() {
		BONEFISHCODE.ready();

    $(window).on('load', function() {
      BONEFISHCODE.load();
    });

    $(window).on('resize', function() {
      BONEFISHCODE.resize();
    });

    $(window).on('scroll', function() {
      BONEFISHCODE.scroll();
    });
	});

//
// function end
// --------------------------------------------------
//

})(jQuery);
